{{- /* SEO Meta Tags Partial */}}
{{- /* Supports seoTitle and seoDescription frontmatter overrides */}}

{{- /* Title computation */}}
{{- $pageTitle := .Title -}}
{{- if .Params.seoTitle -}}
    {{- $pageTitle = .Params.seoTitle -}}
{{- end -}}

{{- /* Description fallback chain: seoDescription > Description > Summary > Site description */}}
{{- $description := .Site.Params.description -}}
{{- if .IsHome -}}
    {{- $description = .Site.Params.description -}}
{{- else if .Params.seoDescription -}}
    {{- $description = .Params.seoDescription -}}
{{- else if .Params.Description -}}
    {{- $description = .Params.Description -}}
{{- else if .Summary -}}
    {{- $description = .Summary | plainify | truncate 160 -}}
{{- end -}}

{{- /* Canonical URL */}}
{{- $canonicalURL := .Permalink | absURL -}}
{{- if .IsHome -}}
    {{- $canonicalURL = .Site.BaseURL -}}
{{- end -}}

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
{{- if .Params.noindex }}
<meta name="robots" content="noindex" />
{{- end }}
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="{{ if .Params.author }}{{ .Params.author }}{{ else }}{{ range .Site.Author }}{{ . }} {{ end }}{{ end }}">
<meta name="description" content="{{ $description }}" />
<meta name="keywords" content="{{ .Site.Params.keywords }}{{ if .Params.tags }}{{ range .Params.tags }}, {{ . }}{{ end }}{{ end }}" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="{{ .Site.Params.themeColor }}" />
{{- if .IsHome }}
<meta name="application-name" content="shagun.xyz" />
<meta name="apple-mobile-web-app-title" content="shagun.xyz" />
{{- end }}
<link rel="canonical" href="{{ $canonicalURL }}" />

{{- /* Title block */}}
<title>
{{- if .IsHome -}}
    {{ $.Site.Title }}
{{- else -}}
    {{ $pageTitle }} | {{ $.Site.Title }}
{{- end -}}
</title>

{{- /* Image computation for social sharing */}}
{{- $shareImage := "" -}}
{{- if .IsHome -}}
    {{- if .Site.Params.Portrait.Path -}}
        {{- $shareImage = absURL (printf "images/%s" .Site.Params.Portrait.Path) -}}
    {{- else if .Site.Params.images -}}
        {{- $shareImage = absURL (index .Site.Params.images 0) -}}
    {{- end -}}
{{- else -}}
    {{- if .Params.images -}}
        {{- $shareImage = absURL (index .Params.images 0) -}}
    {{- else if .Params.Cover -}}
        {{- $shareImage = .Params.Cover | absURL -}}
    {{- else if .Site.Params.images -}}
        {{- $shareImage = absURL (index .Site.Params.images 0) -}}
    {{- end -}}
{{- end -}}

{{- /* Twitter Card Meta Tags */}}
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ $pageTitle }}{{ end }}" />
<meta name="twitter:description" content="{{ $description }}" />
{{- if $shareImage }}
<meta name="twitter:image" content="{{ $shareImage }}" />
{{- end }}
{{- if .Site.Params.social -}}
    {{- range .Site.Params.social -}}
        {{- if eq .name "twitter" }}
<meta name="twitter:site" content="{{ .url | replaceRE "^https?://(www\\.)?(twitter\\.com|x\\.com)/" "@" | replaceRE "/$" "" }}" />
        {{- end -}}
    {{- end -}}
{{- end }}

{{- /* Open Graph Meta Tags */}}
<meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}" />
<meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ $pageTitle }}{{ end }}" />
<meta property="og:description" content="{{ $description }}" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:site_name" content="{{ .Site.Title }}" />
<meta property="og:locale" content="{{ .Site.LanguageCode | default "en_US" | replaceRE "-" "_" }}" />
{{- if $shareImage }}
<meta property="og:image" content="{{ $shareImage }}" />
{{- end }}

{{- /* Article specific OG tags */}}
{{- range .Params.categories }}
<meta property="article:section" content="{{ . }}" />
{{- end }}
{{- if isset .Params "date" }}
<meta property="article:published_time" content="{{ time .Date }}" />
{{- end }}
